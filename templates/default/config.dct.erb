{
    "server_type" = "server"

    "hdl_http_config" = {
        "bind_address" = "<%= node['handle']['bind_address'] %>"
        "num_threads" = "15"
        "bind_port" = "<%= node['handle']['http_port'] %>"
        "backlog" = "50"
        "log_accesses" = "<%= node['handle']['log_accesses'] %>"
    }

    "hdl_udp_config" = {
        "bind_address" = "<%= node['handle']['bind_address'] %>"
        "num_threads" = "15"
        "bind_port" = "<%= node['handle']['port'] %>"
        "log_accesses" = "<%= node['handle']['log_accesses'] %>"
    }

    "hdl_tcp_config" = {
        "bind_address" = "<%= node['handle']['bind_address'] %>"
        "num_threads" = "15"
        "bind_port" = "<%= node['handle']['port'] %>"
        "backlog" = "50"
        "log_accesses" = "<%= node['handle']['log_accesses'] %>"
    }

    "log_save_config" = {
        "log_save_directory" = "<%= node['handle']['log_save_directory'] %>"
        "log_save_interval" = "<%= node['handle']['log_save_interval'] %>"
    }

    "no_udp_resolution" = "n"
    "interfaces" = (
        "hdl_udp"
        "hdl_tcp"
        "hdl_http"
    )

    "server_config" = {

        storage_type = "sql"

        sql_settings = {
            sql_url = "jdbc:mysql://<%= node['handle']['sql_host'] %>/<%= node['handle']['sql_db'] %>?useUnicode=true&characterEncoding=UTF8"
            sql_driver = "com.mysql.jdbc.Driver"
            sql_login = "<%= node['handle']['sql_login'] %>"
            sql_passwd = "<%= node['handle']['sql_passwd'] %>"
            sql_read_only = "no"
        }

        "server_admins" = (
            <%= node['handle']['server_admins'].join(" ") %>
        )

        "max_session_time" = "86400000"
        "this_server_id" = "<%= node['handle']['this_server_id'] %>"
        "max_auth_time" = "60000"
        "replication_authentication" = "<%= node['handle']['replication_authentication'].join(" ") %>"
        "replication_sites_handle" = "<%= node['handle']['replication_sites_handle'].join(" ") %>"
        "case_sensitive" = "no"
    }
}
